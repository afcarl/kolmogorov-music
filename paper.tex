% Based on the template for sigplanconf LaTeX Class by Paul C. Anagnostopoulos (paul@windfall.com)
\documentclass[numbers, preprint]{sigplanconf}

\usepackage{amsmath}
\usepackage{hyperref}

\newcommand{\cL}{{\cal L}}

\begin{document}

\special{papersize=8.5in,11in}
\setlength{\pdfpageheight}{\paperheight}
\setlength{\pdfpagewidth}{\paperwidth}

\conferenceinfo{FARM 2016}{September 24, 2016, Nara, Japan}
\copyrightyear{2016}
%\copyrightdata{978-1-nnnn-nnnn-n/yy/mm}
%\copyrightdoi{nnnnnnn.nnnnnnn}

\publicationrights{author-pays}

\titlebanner{Submission for FARM 2016}

\title{Algomusicology, ????, Profit}
%\subtitle{Subtitle Text, if any}

\authorinfo{Chris Ford}
           {ThoughtWorks}
           {christophertford@gmail.com}

\maketitle

\begin{abstract}
In this paper I propose a novel method for converting algomusicology into profit. While my particular example
is tongue-in-cheek, it shows that algorithmic composition and analysis can help us deconstruct and disrupt
traditional notions of musical authorship.
\end{abstract}

%\category{CR-number}{subcategory}{third-level}

%\keywords
%keyword1, keyword2

\section{Introduction}

The South Park Underpants Gnomes\cite{Gnomes} are renowned for their business plan:
\begin{enumerate}
    \item Collect underpants
    \item ?
    \item Profit
\end{enumerate}

A common interpretation of the Gnomes' business is as a satire on Silicon Valley startups.
Algomusicologists and starter-uppers have a challenge in common with the Underpants Gnomes
- we may have collected and analysed a considerable quantity of underpants/music/users, but how are we to turn that into profit?

Less glibly, is algomusicology doomed to be a mere observer and explainer of musical practice, or might it become an
active participant in the conversation? Computer science is able to influence the software industry, though that might take longer
than we'd like. \footnote{Alonzo Church developed the lambda calculus in the 1930s. Java gained lambda expressions in 2015.}
Can algomusicology influence music?\footnote{This paper appears to be the first reference to algomusicology. I believe the term,
which is a portmanteau of algorave and musicology, has a self-evident definition.}

This paper will argue that it can. It will do so by citing examples of existing art works that are algorithmic in nature, and
also by using algomusicological concepts to create a work that challenges our present conception of musical authorship and
copyright.

The examples in this paper are all written in Clojure\cite{Clojure}, a dialect of Lisp. I also rely on Leipzig\cite{Leipzig},
a music theory library, and Midje\cite{Midje}, a unit testing library.

\section{Air on the {\textbackslash}G String\cite{Air on the G String}}
Very great quantities of data can exhibit very little complexity. Consider the following Clojure expression, which
evaluates to a sequence of $10^{15}$ uppercase G characters:

\begin{verbatim}
(repeat (* 1000 1000 1000 1000 1000) \G)
\end{verbatim}

Though storing such a string would require roughly a petabyte of memory, representing it indirectly as a computation
takes very little space at all. That's roughly the size all music ever recorded,
described in less than a half a tweet\footnote{Based on the iTunes library featuring approximately 50 million songs
of approximately 4 megabytes each, and assuming it represents approximately a fifth of all recorded music. Tweets are
restricted to 140 characters.}.

The insight that the inherent complexity of data can be measured by the length of the computer program needed to express it
originates with Andrey Kolmogorov\cite{On Tables of Random Numbers}. The Kolmogorov complexity of a piece of data is defined
as the length of the shortest program that evaluates to it.

We can use Clojure's macro facility to build a crude framework for comparing the size of descriptions and their
resulting values. The following two definitions are identical, save that \verb|description-length| is a macro and therefore
operates on the unevaluated expression.

\begin{verbatim}
(defn result-length [expression]
  (-> expression print-str count))

(defmacro description-length [expression]
  (-> expression print-str count))
\end{verbatim}

Here is an example of using these definitions to calculate the description and result length of a short sequence of Gs.
The \verb|fact| notation is due to Midje, which allows us to write \verb|(fact expression => result)|,
which asserts that \verb|expression| evaluates to \verb|result|.

\begin{verbatim}
(fact
  (result-length (repeat 65 \G)) => 131
  (description-length (repeat 65 \G)) => 13)
\end{verbatim}

The explanatory power of a description can be measured by comparing the length of the textual description and the length
of the resulting value. Explanatory power is equivalent to compression power, where representing a value via an
expression is viewed as a compression strategy.

If there is no way to describe a value more concisely than the value itself, we say that it is random. In other words, an
explanatory power of one or less is no explanation at all. In compression terms, there is no possible space saving
by representing this value by an expression.

\begin{verbatim}
(defmacro explanatory-power [expression]
  `(/ (result-length ~expression)
      (description-length ~expression)))
\end{verbatim}

The explanatory power of our description of 65 Gs is high. A repetitive string of identical characters is
highly redundant, highly compressible and hence amenable to concise description. The explanatory power of this way of
representing the string of Gs this way is just over 10, because the description is about a tenth of the length of the
value itself.

\begin{verbatim}
(fact
  (explanatory-power (repeat 65 \G)) => 131/13)
\end{verbatim}

There are many expressions that evaluate to the same value, so there are likely to be different expressions of varying
explanatory power for the same value. The Kolmogorov complexity is defined as the length of the briefest possible description.
This is not, in general, computable, so it's not possible to determine whether we have obtained the best possible explanation
for an arbitrary piece of data.

\section{Analysis by compression}

David Meredith has used Kolmogorov complexity to compare the quality of musical analyses\cite{Analysis by Compression}.
The theory goes that the
more concise the algorithmic description of a piece, the better the musical model.

Using this idea, we can show that composing "Row, row, row your boat" out of sequences of durations and pitches
is a better description of the piece than the raw notes. The music functions e.g. \verb|phrase| are due to Leipzig,
and emit a time series data structure representing the resulting notes. \verb|;| indicates a comment in Clojure.

\begin{verbatim}
(def row-row
                ; Row, row, row  your boat,
  (->>   (phrase [3/3  3/3  2/3  1/3  3/3]
                 [  0    0    0    1    2])

       (then    ; Gent-ly   down the  stream,
         (phrase [2/3  1/3  2/3  1/3  6/3]
                 [  2    1    2    3    4]))

       (then    ; Merrily, merrily, merrily, merrily,
         (phrase (repeat 12 1/3)
                 (mapcat #(repeat 3 %) [7 4 2 0])))

       (then    ; Life is   but  a    dream!
         (phrase [2/3  1/3  2/3  1/3  6/3]
                 [  4    3    2    1    0]))

       (canon (simple 4))
       (where :pitch (comp A major))))
\end{verbatim}

We can calculate the ratio between the literal notes of the song and the above description.
The \verb|definitional| macro allows us to use the symbol \verb|row-row| in our fact notation, rather than
having to paste in the entire expression.

\begin{verbatim}
(defmacro definitional [macro sym]
  (let [value (-> sym repl/source-fn read-string last)]
    `(~macro ~value)))

(fact
  (definitional description-length row-row) => 281
  (definitional result-length row-row) => 2037
  (definitional explanatory-power row-row) => 2037/281)
\end{verbatim}

\section{The Library of Babel}

The Kleene star is the set of all possible strings built from a set of elements. Here is a function that takes a set of
elements and enumerates the Kleene star of that set as a lazy sequence.

\begin{verbatim}
(defn kleene* [elements]
  (letfn [(expand [strings]
            (for [s strings e elements] (conj s e)))]
    (->>
      (lazy-seq (kleene* elements))
      expand
      (cons []))))
\end{verbatim}

We can use this construction with an ASCII alphabet to obtain all possible ASCII strings.
This results in something very similar to the Library of Babel as imagined by Jorge Luis Borges\cite{The Library of Babel}. In his
vast fictional library, thousands of hexagonal rooms house all possible books of four hundred and ten pages.

The difference is that our sequence has all possible strings of all finite lengths.

\begin{verbatim}
(defn library-of-babel []
  (let [ascii (->> (range 32 127) (map char))]
    (->> ascii
       kleene*
       (map #(apply str %)))))

(fact
  (->> (library-of-babel) (take 3)) => ["" " " "!"]
  (nth (library-of-babel) 364645) => "GEB")
\end{verbatim}

If we enumerate and then concatenate the Kleene star of a particular alphabet, it produces
a disjunctive sequence or lexicon. A lexicon has the property that every finite string is a substring.

The result of the Kleene star are interesting from a Kolmogorov complexity perspective, because they can be described
concisely yet contain multitudes. Paradoxically, it displays the property that the whole is simpler than (almost all of)
the parts. That is, the Kolmogorov complexity of one string in our Library of Babel is more complicated to describe
than the Library taken as a whole.

Borges appreciated this paradox. His anonymous narrator reports that on "some shelf in some hexagon (men reasoned)
there must exist a book which is the formula and perfect compendium of all the rest". In other words, that one book
epitomises the complexity of the entire library.

Any of the many books that contain our \verb|library-of-babel| function match the narrator's description,
though the books that also contain the rest of this paper must surely provide more helpful context.

\section{Contact}

In Carl Sagan's novel 'Contact'\cite{Contact}, he imagines that a message to humanity is encoded in the digits of pi.
If we design an appropriate encoding scheme, we could do a similar thing and treat the digits of pi as music. However,
we would encounter a similar problem to Borges' librarians - we suspect that every sequence of data we could possibly want
is in there somewhere, but we don't know where to look.

If pi's decimal expansion does have every possible combination of digits, then it's what is known as a disjunctive
sequence or lexicon. But we don't know for sure. No one has been able to prove it either way.

Fortunately, there are other transcendental numbers that are more predictable. The Champernowne constant was discovered
by David Champernowne as an undergraduate\cite{The construction of decimals normal in the scale of ten}. It has a
decimal expansion that is the concatenation of the digits of the natural numbers. To refer to the sequence of digits
in its decimal expansion we can simply refer to the Champernowne word.

Here we construct the Champernowne word by decomposing each natural number into its constituent digits and concatenating
the results together.

\begin{verbatim}
(defn decompose-into-digits [n]
  (let [[remainder quotient] ((juxt mod quot) n 10)]
    (if (zero? quotient)
      [remainder]
      (conj
        (decompose-into-digits quotient)
        remainder))))

(defn champernowne-word
  [skip-to]
  (->> (range)
       (map #(+ skip-to %))
       (mapcat decompose-into-digits)))

(fact
  (->> (champernowne-word 0) (take 16))
    => [0 1 2 3 4 5 6 7 8 9 1 0 1 1 1 2])
\end{verbatim}

It is easily seen to be a lexicon for the decimal digits, because:
\begin{enumerate}
    \item By definition, the Champernowne word includes every natural number.
    \item Every sequence of digits corresponds to a natural number.
    \item Therefore, the Champernowne word contains all possible sequences of digits.
\end{enumerate}
Of course, a sequence of digits may occur earlier than its natural number - the sequence "34" first occurs when numbers three and
four are encountered, well in advance of the natural number 34.

In the above example we generate the word starting from zero, and decompose the digits of
every subsequent natural number. However, we could just as easily start at any other natural number, which is demonstrated
by the \verb|skip-to| parameter. This is a useful property, because it lets us jump straight to any part of the constant
without having to generate all the previous digits.

\section{Flutter}

The Criminal Justice and Public Order Act 1994 was an attempt by the UK Government to curb rave culture. The musicological
dilemma encountered by the government of the day was how to define raves. They settled on prohibiting gatherings where
"a succession of repetitive beats" were played\cite{Joseph Gallivan on pop}.

The duo Autechre responded with the Anti EP\cite{Anti EP}, whose third track 'Flutter', was designed to protest the legislation.
Band member
Sean Booth explained that they "made as many different bars as we could on the drum machine, then strung them all together."
\cite{Joseph Gallivan on pop}
In other words, as every bar features a unique beat, 'Flutter' does not match the government's algomusicological description
of "repetitive beats".

Autechre appreciated the practical difficulties of negotiating the subtleties of complexity theory at 3am in a field,
so they advised DJs to "have a lawyer and a musicologist present at all times to confirm the non repetitive nature of the
music in the event of police harassment."\cite{Joseph Gallivan on pop}

Both legislators and artists are clearly taking algomusicological positions. The government attempted to construct the set
of all rave musics using a complexity characterisation. Autechre responded with what amounts to a diagonal argument, demonstrating
the inadequacy of the original claim.

\section{Blurred Lines}

'Blurred Lines' is a 2013 pop song written by Pharrell Williams and Robin Thicke\cite{Blurred Lines}. In March 2015,
they were found to have infringed on the copyright of the Marvin Gaye song 'Got to Give It Up'\cite{Got to Give It Up}
\cite{USA Today}.

Such judgements are perilous from a musicological point of view, as they are often based on a jury's intuition as to
the similarity between songs and not, for example, on a conditional Kolmogorov complexity analysis of the distance between
the two compositions.

As a response to this situation, I decided to compose a track that would infringe on the copyright of both songs. The following
piece decodes the Champernowne word into music.

\begin{verbatim}
(defn copyright-infringement-song
  [skip-to]
  (->>
    (champernowne-word skip-to)
    (coding/decode 3)
    (tempo (bpm 120))))
\end{verbatim}

As the Champernowne word's digits are predictable, I am able to skip ahead to any part of the song I choose. Here
is the value of \verb|skip-to| that results in a passable version of 'Blurred Lines'.\footnote{The encoding scheme is chosen
to be reversible, which allowed me to determine where in the Champernowne word 'Blurred Lines' would occur. Full details are in the accompanying code.}

\begin{verbatim}
(def gaye-williams-thicke-constant
  12450012001200311273127612731276127312761273127612731...
  27612731276124500120012124500120012003112731276127312...
  76127312761273127612731276127312761245001200121245001...
  20012003112731276127312761273127612731276127312761273...
  12761245001200121245001200120031127312761273127612731...
  27612731276127312761273127612450012001212400012001200...
  31126812711268127112681271126812711268127112681271124...
  00012001212400012001200311268127112681271126812711268...
  12711268127112681271124000120012124000120012003112681...
  27112681271126812711268127112681271126812711240001200...
  121252004100411264125012621249126112471245)
\end{verbatim}

There is nothing in the description of the \verb|copyright-infringement-song| that is in any way related to 'Blurred Lines'.
It is simply a straightforward musical rendering of a well-known mathematical constant derived from the decimal counting
system.

What's more, every other song is also somewhere in there. Past, present and future compositions already exist somewhere in
the depths of this infinite piece.

Here we finally come to the profit generation strategy - copyright litigation. As the \verb|copyright-infringement-song| is
a universal piece of music, any work published subsequent to it infringes on its copyright.\footnote{I am not a lawyer. Do not rely on my legal advice.} In order to convert our algomusicological understanding into profit, we simply have to sue the composers
of every marginally successful musical work from now until they fix the law.

\section{Conclusion}

\begin{enumerate}
    \item Algomusicology
    \item Copyright litigation
    \item Profit!
\end{enumerate}

\acks

Thank you to the StrangeLoop conference of 2015, which accepted the talk 'Kolmogorov Music' from which this paper derives.

Thank you also to Sam Aaron and Jeff Rose for giving the world Overtone\cite{Overtone}, the audio programming environment
that made this paper possible.

\bibliographystyle{plainnat}

% The bibliography should be embedded for final submission.

\begin{thebibliography}{}
\softraggedright

\bibitem{Overtone} Aaron, Sam and Rose, Jeff: Overtone (\url{http://overtone.github.io})
\bibitem{Anti EP} Autechre: Anti EP
\bibitem{Air on the G String} Wilhelmj, August arranging Bach, Johann Sebastian: Air on the G String
\bibitem{The Library of Babel} Borges, Jorge Luis: The Library of Babel
\bibitem{The construction of decimals normal in the scale of ten} Champernowne, David: The construction of decimals normal in the scale of ten
\bibitem{Gnomes} Brady, Pam, Parker, Trey and Stone, Matt. Episode 17, season 2 of South Park
\bibitem{Got to Give It Up} Got to Give It Up: Gaye, Marvin
\bibitem{Leipzig} Ford, Chris: Leipzig
\bibitem{Joseph Gallivan on pop} Gallivan, Joseph: Joseph Gallivan on pop (\url{http://www.independent.co.uk/life-style/jospeh-gallivan-on-pop-1414727.html})
\bibitem{Clojure} Hickey, Rich: Clojure
\bibitem{On Tables of Random Numbers}  Kolmogorov, Andrey: On Tables of Random Numbers
\bibitem{Midje} Marick, Brian: Midje
\bibitem{Analysis by Compression} Meredith, David: Analysis by Compression
\bibitem{USA Today} Oldenburg, Ann: 'Blurred Lines' jury finds for Marvin Gaye (\url{http://www.usatoday.com/story/life/music/2015/03/10/blurred-lines-trial-verdict/24492431/})
\bibitem{Contact} Sagan, Carl: Contact
\bibitem{Blurred Lines} Williams, Pharrel and Thicke, Robin: Blurred Lines

\end{thebibliography}

\end{document}
